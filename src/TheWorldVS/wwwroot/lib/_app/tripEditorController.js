!function(){"use strict";function t(t,n){function s(){i.isBusy=!0,n.post(a,i.newStop).then(function(t){i.stops.push(t.data),o(i.stops),i.newStop={}},function(){i.errorMessage="Failed to add new stop."})["finally"](function(t){i.isBusy=!1})}function e(){n.get(a).then(function(t){angular.copy(t.data,i.stops),o(i.stops)},function(){i.errorMessage="Failed to get stops."})["finally"](function(t){i.isBusy=!1})}var i=this;i.tripName=t.tripName,i.stops=[],i.errorMessage="",i.isBusy=!0,i.newStop={},i.addStop=s;var a="/api/trips/"+i.tripName+"/stops";e()}function o(t){if(t&&t.length>0){var o=_.map(t,function(t){return{lat:t.latitude,"long":t.longitude,info:t.name}});travelMap.createMap({stops:o,selector:"#map",currentStop:1,initialZoom:3})}}angular.module("app-trips").controller("tripEditorController",t),t.$inject=["$routeParams","$http"]}();